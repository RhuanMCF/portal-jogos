<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üê∏ FROGGER - Brick Game 9999 in 1</title>
  <style>
    body { margin: 0; padding: 20px; background: #000; color: lime; font-family: 'Courier New', monospace; text-align: center; }
    h1 { font-size: 2em; margin-bottom: 10px; }
    #hud { display: flex; justify-content: space-around; align-items: center; margin-bottom: 10px; font-size: 1.2em; font-weight: bold; }
    canvas { border: 3px solid lime; background: #111; display: block; margin: 0 auto; image-rendering: pixelated; }
    .leaderboard { margin-top: 20px; padding: 15px; border: 2px solid #333; max-width: 600px; margin: 20px auto; }
    .best-score { display: block; font-size: 1.1em; margin: 5px 0; color: #90EE90; }
    button { background: lime; color: black; border: none; padding: 10px 20px; font-size: 1em; font-weight: bold; cursor: pointer; border-radius: 5px; }
    button:hover { background: #32CD32; }
    #game-over { font-size: 1.5em; color: red; margin: 10px 0; }
  </style>
</head>
<body>
  <h1>üê∏ FROGGER - Brick Game 9999 in 1</h1>
  <div id="hud">
    <span id="score">SCORE: 0</span>
    <span id="lives">VIDAS: 3</span>
    <span id="level">LVL: 1</span>
    <button id="reset">üîÑ RESET</button>
  </div>
  <canvas id="gc" width="600" height="600"></canvas>
  <div id="game-over" style="display:none;"></div>
  <div class="leaderboard">
    <h3>üèÜ TOP 5 RECORDES</h3>
    <div id="scores">
      <span class="best-score">1. --- : 0</span>
      <span class="best-score">2. --- : 0</span>
      <span class="best-score">3. --- : 0</span>
      <span class="best-score">4. --- : 0</span>
      <span class="best-score">5. --- : 0</span>
    </div>
  </div>

  <script>
    var FroggerGame;

    (function () {
      const COLS = 15, ROWS = 15, TILE = 40;
      var canv, ctx;
      var frog = { x: 7, y: 14 };
      var logs = [], cars = [];
      var score = 0, lives = 3, level = 1;
      var gameRunning = true;
      var keys = {};
      var bestScores = [];

      function loadBestScores() {
        try {
          const saved = localStorage.getItem('froggerBestScores');
          bestScores = saved ? JSON.parse(saved) : Array(5).fill({name:'---',score:0});
        } catch { bestScores = Array(5).fill({name:'---',score:0}); }
        updateScoresDisplay();
      }

      function saveBestScores() {
        try { localStorage.setItem('froggerBestScores', JSON.stringify(bestScores)); } catch(e) {}
      }

      function updateScoresDisplay() {
        document.querySelectorAll('.best-score').forEach((el,i) => {
          el.textContent = `${i+1}. ${bestScores[i]?.name || '---'} : ${bestScores[i]?.score || 0}`;
        });
      }

      function addScore(name, sc) {
        bestScores.push({name, score:sc});
        bestScores.sort((a,b)=>b.score - a.score).splice(5);
        saveBestScores();
        updateScoresDisplay();
      }

      function reset() {
        frog.x = 7; frog.y = 14;
        logs = []; cars = [];
        initObjects();
        score = 0; lives = 3; level = 1;
        gameRunning = true;
        updateHUD();
        document.getElementById('game-over').style.display = 'none';
      }

      function updateHUD() {
        document.getElementById('score').textContent = `SCORE: ${score}`;
        document.getElementById('lives').textContent = `VIDAS: ${lives}`;
        document.getElementById('level').textContent = `LVL: ${level}`;
      }

      function initObjects() {
        logs = [];
        cars = [];

        // Logs in water rows
        for (let row = 2; row <= 6; row++) {
          const speed = (row % 2 === 0 ? 1 : -1) * (0.5 + level * 0.1);
          const length = 3 + Math.floor(Math.random() * 3);
          logs.push({
            x: row % 2 === 0 ? -length : COLS,
            y: row,
            length: length,
            speed: speed,
            color: '#8B4513'
          });
        }

        // Cars in road rows
        for (let row = 9; row <= 13; row++) {
          const speed = (row % 2 === 0 ? -1 : 1) * (1 + level * 0.2);
          cars.push({
            x: row % 2 === 0 ? COLS : -2,
            y: row,
            width: 2,
            speed: speed,
            color: ['#FF0000', '#FFFF00', '#0000FF', '#FF00FF'][Math.floor(Math.random() * 4)]
          });
        }
      }

      function update() {
        if (!gameRunning) return;

        // Move logs
        logs.forEach(log => {
          log.x += log.speed;
          if (log.x > COLS) log.x = -log.length;
          if (log.x < -log.length) log.x = COLS;
        });

        // Move cars
        cars.forEach(car => {
          car.x += car.speed;
          if (car.x > COLS) car.x = -car.width;
          if (car.x < -car.width) car.x = COLS;
        });

        // Move frog with logs
        const frogLog = logs.find(log =>
          frog.y === log.y &&
          frog.x >= log.x && frog.x < log.x + log.length
        );
        if (frogLog) {
          frog.x += frogLog.speed;
        }

        // Check collisions
        // Water collision (no log)
        if (frog.y >= 2 && frog.y <= 6 && !frogLog) {
          lives--;
          frog.x = 7; frog.y = 14;
          if (lives <= 0) gameOver();
          return;
        }

        // Car collision
        const hitCar = cars.find(car =>
          frog.y === car.y &&
          frog.x >= car.x && frog.x < car.x + car.width
        );
        if (hitCar) {
          lives--;
          frog.x = 7; frog.y = 14;
          if (lives <= 0) gameOver();
          return;
        }

        // Win condition
        if (frog.y === 1) {
          score += 100 * level;
          level++;
          frog.x = 7; frog.y = 14;
          initObjects();
        }

        updateHUD();
      }

      function draw() {
        ctx.fillStyle = '#111';
        ctx.fillRect(0, 0, 600, 600);

        // Draw background
        for (let y = 0; y < ROWS; y++) {
          if (y >= 2 && y <= 6) {
            ctx.fillStyle = '#000080'; // Water
          } else if (y >= 9 && y <= 13) {
            ctx.fillStyle = '#333'; // Road
          } else if (y === 1) {
            ctx.fillStyle = '#00FF00'; // Goal
          } else {
            ctx.fillStyle = '#008000'; // Grass
          }
          ctx.fillRect(0, y * TILE, 600, TILE);
        }

        // Draw logs
        logs.forEach(log => {
          ctx.fillStyle = log.color;
          ctx.fillRect(log.x * TILE, log.y * TILE, log.length * TILE, TILE - 2);
        });

        // Draw cars
        cars.forEach(car => {
          ctx.fillStyle = car.color;
          ctx.fillRect(car.x * TILE, car.y * TILE, car.width * TILE, TILE - 2);
        });

        // Draw frog
        ctx.fillStyle = '#00FF00';
        ctx.fillRect(frog.x * TILE + 5, frog.y * TILE + 5, TILE - 10, TILE - 10);
        // Frog eyes
        ctx.fillStyle = '#FFFFFF';
        ctx.fillRect(frog.x * TILE + 8, frog.y * TILE + 8, 4, 4);
        ctx.fillRect(frog.x * TILE + 18, frog.y * TILE + 8, 4, 4);
      }

      function gameOver() {
        gameRunning = false;
        const goEl = document.getElementById('game-over');
        goEl.innerHTML = `GAME OVER! Score: ${score} | <button onclick="FroggerGame.saveHigh()">üíæ Salvar Record</button>`;
        goEl.style.display = 'block';
      }

      // Handle input
      function handleInput() {
        if (keys['ArrowUp'] && frog.y > 0) { frog.y--; keys['ArrowUp'] = false; }
        if (keys['ArrowDown'] && frog.y < ROWS - 1) { frog.y++; keys['ArrowDown'] = false; }
        if (keys['ArrowLeft'] && frog.x > 0) { frog.x--; keys['ArrowLeft'] = false; }
        if (keys['ArrowRight'] && frog.x < COLS - 1) { frog.x++; keys['ArrowRight'] = false; }
      }

      function loop() {
        handleInput();
        update();
        draw();
        requestAnimationFrame(loop);
      }

      // Events
      document.addEventListener('keydown', e => {
        keys[e.key] = true;
      });

      window.FroggerGame = {
        init: function() {
          canv = document.getElementById('gc');
          ctx = canv.getContext('2d');
          loadBestScores();
          reset();
          document.getElementById('reset').onclick = reset;
          loop();
        },
        saveHigh: function() {
          const name = prompt('Nome pro recorde:');
          if (name && name.trim()) {
            const cleanName = name.trim();
            const userBest = bestScores.filter(r => r.name === cleanName).reduce((max, r) => Math.max(max, r.score), 0);
            if (score <= userBest && userBest > 0) {
              const funny = ["üê∏ Seu sapo afundou! Tenta de novo! üê∏", "üòÖ Carros te atropelaram! üí™", "üí• Caiu na √°gua gelada! üîÑ"];
              alert(funny[Math.floor(Math.random()*funny.length)]);
              return;
            }
            addScore(cleanName, score);
            alert('Recorde salvo! üèÜ');
          }
        }
      };

      FroggerGame = window.FroggerGame;
    })();

    window.onload = function() {
      FroggerGame.init();
    };
  </script>
</body>
</html>