<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ“ BREAKOUT - Brick Game 9999 in 1</title>
  <style>
    body { margin: 0; padding: 20px; background: #000; color: lime; font-family: 'Courier New', monospace; text-align: center; }
    h1 { font-size: 2em; margin-bottom: 10px; }
    #hud { display: flex; justify-content: space-around; align-items: center; margin-bottom: 10px; font-size: 1.2em; font-weight: bold; }
    canvas { border: 3px solid lime; background: #111; display: block; margin: 0 auto; image-rendering: pixelated; }
    .leaderboard { margin-top: 20px; padding: 15px; border: 2px solid #333; max-width: 600px; margin: 20px auto; }
    .best-score { display: block; font-size: 1.1em; margin: 5px 0; color: #90EE90; }
    button { background: lime; color: black; border: none; padding: 10px 20px; font-size: 1em; font-weight: bold; cursor: pointer; border-radius: 5px; }
    button:hover { background: #32CD32; }
    #game-over { font-size: 1.5em; color: red; margin: 10px 0; }
  </style>
</head>
<body>
  <h1>ğŸ“ BREAKOUT - Brick Game 9999 in 1</h1>
  <div id="hud">
    <span id="score">SCORE: 0</span>
    <span id="lives">VIDAS: 3</span>
    <span id="level">LVL: 1</span>
    <button id="reset">ğŸ”„ RESET</button>
  </div>
  <canvas id="gc" width="600" height="600"></canvas>
  <div id="game-over" style="display:none;"></div>
  <div class="leaderboard">
    <h3>ğŸ† TOP 5 RECORDES</h3>
    <div id="scores">
      <span class="best-score">1. --- : 0</span>
      <span class="best-score">2. --- : 0</span>
      <span class="best-score">3. --- : 0</span>
      <span class="best-score">4. --- : 0</span>
      <span class="best-score">5. --- : 0</span>
    </div>
  </div>

  <script>
    var BreakoutGame;

    (function () {
      const COLS = 15, ROWS = 10, TILE = 40;
      var canv, ctx;
      var paddle = { x: 250, y: 550, width: 100, height: 20 };
      var ball = { x: 300, y: 500, vx: 3, vy: -3, radius: 8 };
      var bricks = [];
      var score = 0, lives = 3, level = 1;
      var gameRunning = true;
      var keys = {};
      var bestScores = [];

      function initBricks() {
        bricks = [];
        for (let r = 0; r < ROWS; r++) {
          for (let c = 0; c < COLS; c++) {
            bricks.push({
              x: c * TILE,
              y: r * TILE + 50,
              width: TILE - 2,
              height: 20,
              visible: true,
              color: ['#FF0000', '#FF8800', '#FFFF00', '#00FF00', '#0088FF', '#8800FF'][r % 6]
            });
          }
        }
      }

      function loadBestScores() {
        try {
          const saved = localStorage.getItem('breakoutBestScores');
          bestScores = saved ? JSON.parse(saved) : Array(5).fill({name:'---',score:0});
        } catch { bestScores = Array(5).fill({name:'---',score:0}); }
        updateScoresDisplay();
      }

      function saveBestScores() {
        try { localStorage.setItem('breakoutBestScores', JSON.stringify(bestScores)); } catch(e) {}
      }

      function updateScoresDisplay() {
        document.querySelectorAll('.best-score').forEach((el,i) => {
          el.textContent = `${i+1}. ${bestScores[i]?.name || '---'} : ${bestScores[i]?.score || 0}`;
        });
      }

      function addScore(name, sc) {
        bestScores.push({name, score:sc});
        bestScores.sort((a,b)=>b.score - a.score).splice(5);
        saveBestScores();
        updateScoresDisplay();
      }

      function reset() {
        paddle.x = 250;
        ball.x = 300; ball.y = 500; ball.vx = 3; ball.vy = -3;
        initBricks();
        score = 0; lives = 3; level = 1;
        gameRunning = true;
        updateHUD();
        document.getElementById('game-over').style.display = 'none';
      }

      function updateHUD() {
        document.getElementById('score').textContent = `SCORE: ${score}`;
        document.getElementById('lives').textContent = `VIDAS: ${lives}`;
        document.getElementById('level').textContent = `LVL: ${level}`;
      }

      function update() {
        if (!gameRunning) return;

        // Move paddle
        if (keys['ArrowLeft'] && paddle.x > 0) paddle.x -= 8;
        if (keys['ArrowRight'] && paddle.x < 600 - paddle.width) paddle.x += 8;

        // Move ball
        ball.x += ball.vx;
        ball.y += ball.vy;

        // Ball collision with walls
        if (ball.x <= ball.radius || ball.x >= 600 - ball.radius) ball.vx = -ball.vx;
        if (ball.y <= ball.radius) ball.vy = -ball.vy;

        // Ball collision with paddle
        if (ball.y + ball.radius >= paddle.y &&
            ball.x >= paddle.x && ball.x <= paddle.x + paddle.width &&
            ball.vy > 0) {
          ball.vy = -ball.vy;
          // Add some angle based on where it hits the paddle
          const hitPos = (ball.x - paddle.x) / paddle.width;
          ball.vx = (hitPos - 0.5) * 10;
        }

        // Ball collision with bricks
        bricks.forEach(brick => {
          if (brick.visible &&
              ball.x + ball.radius >= brick.x &&
              ball.x - ball.radius <= brick.x + brick.width &&
              ball.y + ball.radius >= brick.y &&
              ball.y - ball.radius <= brick.y + brick.height) {
            brick.visible = false;
            ball.vy = -ball.vy;
            score += 10;
            // Check if all bricks are gone
            if (bricks.every(b => !b.visible)) {
              level++;
              initBricks();
              ball.vy = -Math.abs(ball.vy) * 1.1; // Increase speed
            }
          }
        });

        // Ball falls off screen
        if (ball.y > 600) {
          lives--;
          if (lives <= 0) {
            gameOver();
          } else {
            ball.x = 300; ball.y = 500; ball.vx = 3; ball.vy = -3;
          }
        }
      }

      function draw() {
        ctx.fillStyle = '#111';
        ctx.fillRect(0, 0, 600, 600);

        // Draw bricks
        bricks.forEach(brick => {
          if (brick.visible) {
            ctx.fillStyle = brick.color;
            ctx.fillRect(brick.x, brick.y, brick.width, brick.height);
          }
        });

        // Draw paddle
        ctx.fillStyle = '#00FFFF';
        ctx.fillRect(paddle.x, paddle.y, paddle.width, paddle.height);

        // Draw ball
        ctx.fillStyle = '#FFFFFF';
        ctx.beginPath();
        ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
        ctx.fill();
      }

      function gameOver() {
        gameRunning = false;
        const goEl = document.getElementById('game-over');
        goEl.innerHTML = `GAME OVER! Score: ${score} | <button onclick="BreakoutGame.saveHigh()">ğŸ’¾ Salvar Record</button>`;
        goEl.style.display = 'block';
      }

      function loop() {
        update();
        draw();
        requestAnimationFrame(loop);
      }

      // Events
      document.addEventListener('keydown', e => {
        keys[e.key] = true;
      });
      document.addEventListener('keyup', e => {
        keys[e.key] = false;
      });

      window.BreakoutGame = {
        init: function() {
          canv = document.getElementById('gc');
          ctx = canv.getContext('2d');
          loadBestScores();
          reset();
          document.getElementById('reset').onclick = reset;
          loop();
        },
        saveHigh: function() {
          const name = prompt('Nome pro recorde:');
          if (name && name.trim()) {
            const cleanName = name.trim();
            const userBest = bestScores.filter(r => r.name === cleanName).reduce((max, r) => Math.max(max, r.score), 0);
            if (score <= userBest && userBest > 0) {
              const funny = ["ğŸš« Sua raquete tÃ¡ mole! Tenta de novo! ğŸ“", "ğŸ˜… Bolinha escapou! ğŸ’ª", "ğŸ’¥ Blocos riram de vocÃª! ğŸ”„"];
              alert(funny[Math.floor(Math.random()*funny.length)]);
              return;
            }
            addScore(cleanName, score);
            alert('Recorde salvo! ğŸ†');
          }
        }
      };

      BreakoutGame = window.BreakoutGame;
    })();

    window.onload = function() {
      BreakoutGame.init();
    };
  </script>
</body>
</html>